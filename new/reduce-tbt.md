## 위키피디아의 TBT 개선하기

> 반디부디 때문에 성능 관련한 글을 자주 보게 되네요
>
> 위키피다아 모바일 사이트의 페이지 로딩 속도를 개선한 글에 대해 읽어서 공유드립니다!
> 
> 처음 페이지를 로드할 때 600ms 이상 걸리는 JS 작업이 있었는데, 두 단계에 거쳐 개선하였고, 그 결과 로딩 시간(TBT, Total Blocking Time)을 300ms 정도 줄일 수 있었다고 합니다


### TBT가 중요한 이유
![image](https://github.com/10000-Bagger/free-topic-study/assets/80238096/2f9d6747-9484-4724-8be7-af568fefdb33)

1. 600ms 자바스크립트 실행
2. 관련 핸들러 실행
3. 브라우저가 시각적으로 업데이트가 필요한 부분 수행

- 각 단계마다 실행시간이 오래 걸리면 사용자 인터랙션까지 시간이 오래 걸림
  - 구글에서는 `50ms`보다 오래 걸리면 `"long take"`라고 정의함
 
### TBT란
- FCP(첫번째 컨텐츠가 그려지는 시간) ~ TTI(사용자가 상호작용할 수 있는 시간) 사이에 브라우저의 메인 스레드에 있는 모든 긴 작업의 차단의 합

![image](https://github.com/10000-Bagger/free-topic-study/assets/80238096/201caf11-52c2-4eb0-8c13-75c744a48732)

- 80ms 작업은 50ms보다 30ms 더 길기 때문에 TBT에 30ms 포함
- 30ms 작업은 50ms보다 짧고 긴 작업이 아니므로 TBT에 포함 x
- 100ms 작업은 50ms보다 50ms 더 길기 때문에 TBT에 50ms 포함

=>  TBT: 30ms + 50ms = 80ms
